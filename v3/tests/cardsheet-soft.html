<!doctype html><body>
<link href="styles.css" rel="stylesheet" />
<script type="text/javascript" src="../cardsheet.js"></script>
<script type="text/javascript" src="loader.js"></script>
<script type="text/javascript">

function test(config, number) {
	var container = document.body.appendChild(document.createElement("DIV"));
	
	config.hidden = card(config.card_size.width, config.card_size.height, "?!ɸʘΠЖ֍֎"[Math.random() * 8 | 0]);
	
	var c = cards(config.card_size, number);
	var canvasses = cardsheet(config, c);
	canvasses.forEach(function(c) {
		container.appendChild(c);
		c.style.width = "200px";
	});
}

function cards(size, n) {
	var results = [], i = 1;
	while (results.length < n) {
		var sideways = Math.random() > 0.5, w, h;
		w = size.width; h = size.height;
		
		var o = card(w, h, i);
		results.push(o);
		
		if (show_cards) {
			document.body.appendChild(o.image);
			o.style.width = "100px";
		}
		i++;
	}
	return results;
}
function card(w, h, text) {
	var canvas = document.createElement("CANVAS");
	canvas.width = w; canvas.height = h;
	var ctx = canvas.getContext("2d");
	
	ctx.fillStyle = "white";
	ctx.fillRect(0,0, w,h);
	
	var side = Math.min(w, h);
	
	ctx.font = "100px Arial";
	ctx.textBaseline = "middle";
	ctx.fillStyle = "black";
	
	var th = 100;
	var tw = ctx.measureText(text).width;
	var s = Math.min((w * 0.8) / tw, (h * 0.8) / th);
	ctx.translate((w / 2) - (tw / 2 * s), h / 2);
	ctx.scale(s,s);
	ctx.fillText(text, 0, 0);
	
	return canvas;
}

var show_cards = false;
test({ grid: { cols: 10, rows: 7 }, card_size: { width: 100, height: 170 } }, 69);

test({ grid: { cols: 10, rows: 7 }, card_size: { width: 50, height: 50 } }, 70);
test({ grid: { cols: 10, rows: 7 }, card_size: { width: 25, height: 20 } }, 750);

test({ grid: { cols: 3, rows: 3 }, card_size: { width: 750, height: 1050 }, max_scale: 0.5, max_size: 4096 }, 10);

test({ card_size: { width: 150, height: 175 } }, 10);



</script>
